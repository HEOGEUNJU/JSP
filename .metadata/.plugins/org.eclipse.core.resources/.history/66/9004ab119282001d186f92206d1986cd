package kr.or.ddit.memo.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

import org.apache.commons.lang3.StringUtils;

import kr.or.ddit.db.ConnectionFactory;
import kr.or.ddit.servlet09.dao.DataBasePropertyDAOImpl;
import kr.or.ddit.vo.DataBasePropertyVO;
import kr.or.ddit.vo.MemoVO;

public class MemoBaseMemoDAOImpl implements MemoDao {

	private static DataBaseMemoDAOImpl instance;
	public static DataBaseMemoDAOImpl instance(){
		if(instance == null)
			instance = new DataBaseMemoDAOImpl();
		return instance;	
	}

	StringBuffer sql = new StringBuffer();
	@Override
	public List<MemoVO> selectMemoList() {
		// driver class loading : oracle.jdbc.driver.OracleDriver
        sql.append(" SELECT * ");
        sql.append(" FROM tbl_memo ");
//        if(StringUtils.isNotBlank(propertyName)) {
//       	sql.append(" where property_name = ? ");
//        }
        
	     try(
    		 Connection conn = ConnectionFactory.getConnection();
	    	 PreparedStatement pstmt = conn.prepareStatement(sql.toString());
//           Statement stmt = conn.createStatement();
		  ){
//	         ResultSet rs = stmt.executeQuery(sql.toString());
//	    	 if(StringUtils.isNotBlank(propertyName)) {
//	    		 pstmt.setString(1, propertyName);
//	    	 }
	    	 
	    	 ResultSet rs = pstmt.executeQuery();
	         List<MemoVO> list = new ArrayList<>();
	         while(rs.next()){
	        	 MemoVO vo = new MemoVO();
	            list.add(vo);
	            vo.setCode(rs.getInt("code"));
	            vo.setWriter(rs.getString("writer"));
	            vo.setContent(rs.getString("content"));
	            vo.setDate(rs.getString("date2"));
	         }
	         return list;

	      }catch(SQLException e){
	         throw new RuntimeException(e);
	      }
	}
	

	@Override
	public int insertMemo(MemoVO memo) {
		return 0;
	}

	@Override
	public int updateMemo(MemoVO memo) {
		// TODO Auto-generated method stub
		return 0;
	}

	@Override
	public int deleteMemo(MemoVO memo) {
		// TODO Auto-generated method stub
		return 0;
	}

}
